---
# file: test/playbook_graylog.yml
- name: Install and configure Graylog Server
  hosts: vm21
  roles:
    - role: uniqconsulting.graylog3
      graylog3_admin_password: secret

  tasks:
  - name: Install firewalld
    yum:
      name: firewalld
      state: installed

  - name: Enable and start firewalld
    service:
      name: firewalld
      state: started
      enabled: yes

  - name: Open Nginx Web Port
    firewalld:
      port: "443/tcp"
      state: enabled
      immediate: True
      permanent: true

  - name: Open Syslog port 1514/udp (Syslog)
    firewalld:
      port: "1514/udp"
      state: enabled
      immediate: True
      permanent: true

  - name: Open Syslog port 1514/tcp (Syslog)
    firewalld:
      port: "1514/tcp"
      state: enabled
      immediate: True
      permanent: true

  - name: Open Syslog port 2016/udp (Windows GELF)
    firewalld:
      port: "2016/udp"
      state: enabled
      immediate: True
      permanent: true
...
